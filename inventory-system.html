<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DANDY - –¢–æ–≤–∞—Ä–æ—É—á—ë—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</title>
    <link rel="stylesheet" href="assets/custom.css">
    <!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤, Excel, PDF -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
    <style>
        :root {
            /* –¶–≤–µ—Ç–∞ –¢–û–ß–ù–û –∫–∞–∫ –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —Å–∞–π—Ç–µ */
            --primary: #08615b;
            --secondary: #00706c;
            --dandy-bg: #08615b;
            --dandy-green: #04746c;
            --dandy-pink: #FF66B3;
            --dandy-yellow: #e4bc6c;
            --text-light: #F3EADB;
            --text-on-green: #F3EADB;
            --accent: #eebc5c;
            --card: #094a45;
            --chip: #0b5752;
            --chip-hover: #0e6a64;
            --chip-border: rgba(255,255,255,.12);
            --danger: #db3f33;
            --success: #10b981;
            --warning: #f59e0b;
            --dandy-card: #094a45;
            --dandy-muted: #0e6a64;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background: var(--primary);
            color: var(--text-light);
            min-height: 100vh;
        }

        .admin-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: var(--dandy-green);
            padding: 1rem 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .brand-new-logo {
            height: 50px;
            width: auto;
            object-fit: contain;
            display: block;
            filter: drop-shadow(0 2px 8px rgba(0,0,0,0.3));
            transition: transform 0.3s ease;
        }

        .brand-new-logo:hover {
            transform: scale(1.05);
        }

        .logo-text {
            color: white;
        }

        .logo-title {
            font-size: 1.5rem;
            font-weight: 900;
            background: linear-gradient(45deg, var(--dandy-yellow), #fff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .logo-subtitle {
            font-size: 0.7rem;
            opacity: 0.8;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .btn-back {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            background: rgba(255,255,255,0.1);
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .btn-back:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-1px);
        }

        .tabs-wrap {
            background: var(--secondary);
            overflow-x: auto;
            border-top: 1px solid var(--chip-border);
            position: relative;
            padding: 0.5rem 1rem;
            scrollbar-width: thin;
            scrollbar-color: rgba(255,255,255,0.3) transparent;
        }

        .tabs-wrap::-webkit-scrollbar {
            height: 6px;
        }

        .tabs-wrap::-webkit-scrollbar-track {
            background: transparent;
        }

        .tabs-wrap::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 3px;
        }

        .tabs {
            display: flex;
            gap: 0.5rem;
            list-style: none;
            margin: 0;
            padding: 0;
            min-width: max-content;
            white-space: nowrap;
        }

        .tabs li {
            flex-shrink: 0;
        }

        .tab {
            display: block;
            padding: 0.75rem 1.2rem;
            border-radius: 25px;
            background: transparent;
            color: var(--dandy-pink);
            text-decoration: none;
            font-weight: 800;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            transition: all 0.3s ease;
            white-space: nowrap;
            cursor: pointer;
        }

        .tab:hover {
            background: rgba(255,255,255,0.1);
            color: white;
            transform: translateY(-1px);
        }

        .tab.active {
            background: rgba(255,255,255,0.15);
            color: var(--dandy-pink);
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.3);
        }

        .main-content {
            flex: 1;
            background: var(--primary);
            border-radius: 20px 20px 0 0;
            margin-top: 1rem;
            padding: 2rem;
            min-height: calc(100vh - 140px);
        }

        .page-content {
            display: none;
        }

        .page-content.active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: var(--card);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid var(--chip-border);
            box-shadow: 0 6px 24px rgba(0,0,0,0.06);
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text-light);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .grid {
            display: grid;
            gap: 1rem;
        }

        .grid-2 { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
        .grid-3 { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }
        .grid-4 { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            background: rgba(255,255,255,0.03);
        }

        .table th,
        .table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid var(--chip-border);
            color: var(--text-light);
        }

        .table th {
            background: var(--chip);
            font-weight: 600;
            color: var(--text-light);
            position: sticky;
            top: 0;
        }

        .table tr:hover {
            background: var(--chip-hover);
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .btn-primary {
            background: var(--dandy-green);
            color: white;
        }

        .btn-primary:hover {
            background: #0a4d35;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(11, 92, 59, 0.3);
        }

        .btn-secondary {
            background: rgba(255,255,255,0.1);
            color: var(--text-light);
            border: 1px solid var(--chip-border);
        }

        .btn-secondary:hover {
            background: var(--chip-hover);
            color: var(--text-light);
            border-color: var(--accent);
        }

        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .badge-success { background: rgba(16, 185, 129, 0.2); color: #10b981; border: 1px solid #10b981; }
        .badge-warning { background: rgba(245, 158, 11, 0.2); color: #fbbf24; border: 1px solid #f59e0b; }
        .badge-danger { background: rgba(239, 68, 68, 0.2); color: #ef4444; border: 1px solid #dc2626; }
        .badge-info { background: rgba(59, 130, 246, 0.2); color: #60a5fa; border: 1px solid #3b82f6; }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-light);
        }

        .form-input, .form-select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--chip-border);
            border-radius: 8px;
            font-size: 0.95rem;
            transition: border-color 0.3s ease;
            background: rgba(255,255,255,0.05);
            color: var(--text-light);
        }

        .form-select option {
            background: #094a45;
            color: #F3EADB;
        }

        .form-input::placeholder {
            color: rgba(243, 234, 219, 0.5);
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--accent);
            background: rgba(255,255,255,0.1);
        }

        .alert {
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            border-left: 4px solid;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .alert-danger {
            background: #fef2f2;
            border-left-color: #ef4444;
            color: #991b1b;
        }

        .alert-warning {
            background: #fffbeb;
            border-left-color: #f59e0b;
            color: #92400e;
        }

        .alert-info {
            background: #f0f9ff;
            border-left-color: #3b82f6;
            color: #1e40af;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--dandy-green), var(--dandy-bg));
            color: white;
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 900;
            margin-bottom: 0.25rem;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .tabs-secondary {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        @media (max-width: 768px) {
            .header {
                padding: 1rem;
            }
            
            .main-content {
                padding: 1rem;
            }
            
            .grid-2, .grid-3, .grid-4 {
                grid-template-columns: 1fr;
            }

            /* –ú–æ–±–∏–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ */
            #globalSearchContainer {
                margin: 1rem 0 !important;
                order: 1;
                flex: 1 1 100%;
            }

            .header-actions {
                justify-content: space-between;
            }

            #notificationBell {
                padding: 0.5rem;
                font-size: 1rem;
            }

            .tab {
                padding: 0.6rem 1rem;
                font-size: 0.75rem;
            }

            .table {
                font-size: 0.85rem;
            }

            #notificationsDropdown {
                width: calc(100vw - 40px) !important;
                right: 10px !important;
                left: 10px !important;
            }
        }

        @media (max-width: 480px) {
            .brand-new-logo {
                width: 80px;
            }

            .logo-title {
                font-size: 1.2rem;
            }

            .logo-subtitle {
                font-size: 0.7rem;
            }

            .tab {
                padding: 0.5rem 0.8rem;
                font-size: 0.7rem;
            }
        }

        /* Bounce animation –¥–ª—è drag & drop */
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <header class="header">
            <div class="logo-section">
                <img class="brand-new-logo" src="assets/brand/logo.svg" alt="–î–≠–ù–î–ò –ø–∏—Ü—Ü–∞ –∏ —Å—É—à–∏">
                <div class="logo-text">
                    <div class="logo-title">–¢–û–í–ê–†–û–£–ß–Å–¢</div>
                    <div class="logo-subtitle">DANDY Inventory System</div>
                </div>
            </div>
            
            <!-- –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–¥–µ—Å—å -->
            
            <div class="header-actions" style="display: flex; gap: 1rem; align-items: center;">
                <button id="notificationBell" onclick="toggleNotifications()" style="position: relative; background: rgba(255,255,255,0.1); border: 1px solid var(--chip-border); padding: 0.6rem 1rem; border-radius: 25px; cursor: pointer; color: var(--text-light); transition: all 0.3s ease; font-size: 1.2rem;">
                    üîî
                    <span id="notificationBadge" style="display: none; position: absolute; top: -5px; right: -5px; background: var(--danger); color: white; font-size: 0.7rem; padding: 0.2rem 0.4rem; border-radius: 10px; min-width: 18px; text-align: center;">0</span>
                </button>
                <a href="login-system.html" class="btn-back">–í—ã—Ö–æ–¥</a>
            </div>
        </header>

        <!-- –ü–∞–Ω–µ–ª—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
        <div id="notificationsDropdown" style="display: none; position: fixed; top: 80px; right: 20px; width: 400px; max-height: 600px; background: #094a45; border: 1px solid var(--chip-border); border-radius: 12px; box-shadow: 0 8px 24px rgba(0,0,0,0.3); z-index: 1000; overflow: hidden;">
            <div id="notificationsPanel" style="padding: 1rem; overflow-y: auto; max-height: 550px;"></div>
        </div>

        <nav class="tabs-wrap">
            <ul class="tabs" id="tabsContainer">
                <li><a class="tab active" data-page="dashboard">üìä –î–ê–®–ë–û–†–î</a></li>
                <li><a class="tab" data-page="nomenclature">üì¶ –ù–û–ú–ï–ù–ö–õ–ê–¢–£–†–ê</a></li>
                <li><a class="tab" data-page="recipes">üìñ –¢–ö/–¢–¢–ö</a></li>
                <li><a class="tab" data-page="warehouse">üè≠ –°–ö–õ–ê–î</a></li>
                <li><a class="tab" data-page="production">‚öôÔ∏è –ü–†–û–ò–ó–í–û–î–°–¢–í–û</a></li>
                <li><a class="tab" data-page="bar">üç∫ –ë–ê–†/–†–ê–ó–õ–ò–í</a></li>
                <li><a class="tab" data-page="inventory">üìã –ò–ù–í–ï–ù–¢–ê–†–ò–ó–ê–¶–ò–Ø</a></li>
                <li><a class="tab" data-page="egais-module">üç∑ –ï–ì–ê–ò–°</a></li>
                <li><a class="tab" data-page="crpt">üè∑Ô∏è –ß–ï–°–¢–ù–´–ô –ó–ù–ê–ö</a></li>
                <li><a class="tab" data-page="mercury">üêÑ –ú–ï–†–ö–£–†–ò–ô</a></li>
                <li><a class="tab" data-page="integrations">üîÑ –ò–ù–¢–ï–ì–†–ê–¶–ò–ò</a></li>
                <li><a class="tab" data-page="reports">üìà –û–¢–ß–Å–¢–´</a></li>
                <li><a class="tab" data-page="settings">‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò</a></li>
            </ul>
            <div class="tabs-underline">
                <div class="thumb"></div>
            </div>
        </nav>

        <main class="main-content">
            <!-- Dashboard -->
            <div id="dashboard" class="page-content active">
                <div class="grid grid-4">
                    <div class="stat-card">
                        <div class="stat-value">‚ÇΩ 2 456 780</div>
                        <div class="stat-label">–í–∞–ª–æ–≤–∞—è –ø—Ä–∏–±—ã–ª—å</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">1 245</div>
                        <div class="stat-label">–ü–æ–∑–∏—Ü–∏–π –≤ –æ–±–æ—Ä–æ—Ç–µ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">18</div>
                        <div class="stat-label">–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å—Ç–∞—Ç–∫–∏</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">94.5%</div>
                        <div class="stat-label">–¢–æ—á–Ω–æ—Å—Ç—å —É—á–µ—Ç–∞</div>
                    </div>
                </div>

                <!-- –ù–æ–≤—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ -->
                <div class="grid grid-2" style="margin-top: 2rem;">
                    <div class="card">
                        <div class="card-title">üìä –î–∏–Ω–∞–º–∏–∫–∞ –ø—Ä–æ–¥–∞–∂ (30 –¥–Ω–µ–π)</div>
                        <canvas id="salesDynamicsChart" style="max-height: 300px;"></canvas>
                    </div>
                    <div class="card">
                        <div class="card-title">üèÜ –¢–û–ü-10 —Ç–æ–≤–∞—Ä–æ–≤</div>
                        <canvas id="topProductsChart" style="max-height: 300px;"></canvas>
                    </div>
                </div>

                <div class="grid grid-2" style="margin-top: 2rem;">
                    <div class="card">
                        <div class="card-title">üíé –†–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</div>
                        <canvas id="profitabilityChart" style="max-height: 300px;"></canvas>
                    </div>
                    <div class="card">
                        <div class="card-title">üì¶ –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç—å</div>
                        <canvas id="turnoverChart" style="max-height: 300px;"></canvas>
                    </div>
                </div>

                <div class="grid grid-2">
                    <div class="card">
                        <h3 class="card-title">üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∞–ª–µ—Ä—Ç—ã</h3>
                        <div class="alert alert-danger">
                            <span>‚ö†Ô∏è</span>
                            <div>
                                <strong>–û—Å—Ç–∞—Ç–æ–∫ ¬´–õ–æ—Å–æ—Å—å —Ñ–∏–ª–µ¬ª < 1.0 –∫–≥</strong>
                                <div style="font-size: 0.85em; margin-top: 0.25rem;">–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å—Ä–æ—á–Ω–æ –ø–æ–ø–æ–ª–Ω–∏—Ç—å</div>
                            </div>
                        </div>
                        <div class="alert alert-warning">
                            <span>‚è∞</span>
                            <div>
                                <strong>–ü–∞—Ä—Ç–∏—è ¬´–ú–æ–ª–æ–∫–æ 3.2%¬ª –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ 2 –¥–Ω—è</strong>
                                <div style="font-size: 0.85em; margin-top: 0.25rem;">–ü–∞—Ä—Ç–∏—è ‚Ññ12345, 15 –ª</div>
                            </div>
                        </div>
                        <div class="alert alert-warning">
                            <span>üìã</span>
                            <div>
                                <strong>–ú–µ—Ä–∫—É—Ä–∏–π: 3 –í–°–î —Ç—Ä–µ–±—É—é—Ç –ø–æ–≥–∞—à–µ–Ω–∏—è</strong>
                                <div style="font-size: 0.85em; margin-top: 0.25rem;">–°—Ä–æ–∫: –¥–æ –∫–æ–Ω—Ü–∞ –¥–Ω—è</div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üìä –ü—Ä–æ–¥–∞–∂–∏ –∏ —Å–ø–∏—Å–∞–Ω–∏—è –∑–∞ —Å–º–µ–Ω—É</h3>
                        <table class="table">
                            <tr>
                                <td><strong>–ü—Ä–æ–¥–∞–∂–∏</strong></td>
                                <td style="text-align: right;">‚ÇΩ 128 540</td>
                            </tr>
                            <tr>
                                <td><strong>COGS (—Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å)</strong></td>
                                <td style="text-align: right;">‚ÇΩ 48 560</td>
                            </tr>
                            <tr>
                                <td><strong>–í–∞–ª–æ–≤–∞—è –ø—Ä–∏–±—ã–ª—å</strong></td>
                                <td style="text-align: right; color: var(--dandy-green); font-weight: 700;">‚ÇΩ 79 980</td>
                            </tr>
                            <tr>
                                <td><strong>–°–ø–∏—Å–∞–Ω–æ –∞–ª–∫–æ–≥–æ–ª—è</strong></td>
                                <td style="text-align: right;">24 –ø–æ—Ä—Ü–∏–∏</td>
                            </tr>
                            <tr>
                                <td><strong>–ü–æ—Ç–µ—Ä–∏/–ü—Ä–æ–ª–∏–≤</strong></td>
                                <td style="text-align: right;">1.2 –ª</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">üîÑ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>–í—Ä–µ–º—è</th>
                                <th>–û–ø–µ—Ä–∞—Ü–∏—è</th>
                                <th>–î–æ–∫—É–º–µ–Ω—Ç</th>
                                <th>–°—É–º–º–∞</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>14:23</td>
                                <td>–ü—Ä–∏—Ö–æ–¥ –æ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞</td>
                                <td>–£–ü–î-00456</td>
                                <td>‚ÇΩ 45 600</td>
                                <td><span class="badge badge-success">–ü—Ä–æ–≤–µ–¥–µ–Ω</span></td>
                            </tr>
                            <tr>
                                <td>13:45</td>
                                <td>–í—ã–ø—É—Å–∫ –ø–æ–ª—É—Ñ–∞–±—Ä–∏–∫–∞—Ç–æ–≤</td>
                                <td>–ü–†-00123</td>
                                <td>‚Äî</td>
                                <td><span class="badge badge-success">–ó–∞–≤–µ—Ä—à–µ–Ω</span></td>
                            </tr>
                            <tr>
                                <td>12:10</td>
                                <td>–°–ø–∏—Å–∞–Ω–∏–µ (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)</td>
                                <td>–ï–ì–ê–ò–°-789</td>
                                <td>‚Äî</td>
                                <td><span class="badge badge-info">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Nomenclature -->
            <div id="nomenclature" class="page-content">
                <div class="card">
                    <h3 class="card-title">üì¶ –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã</h3>
                    <div class="tabs-secondary">
                        <button class="btn btn-primary btn-small">–í—Å–µ —Ç–æ–≤–∞—Ä—ã</button>
                        <button class="btn btn-secondary btn-small">–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã</button>
                        <button class="btn btn-secondary btn-small">–ü–æ–ª—É—Ñ–∞–±—Ä–∏–∫–∞—Ç—ã</button>
                        <button class="btn btn-secondary btn-small">–ê–ª–∫–æ–≥–æ–ª—å</button>
                        <button class="btn btn-secondary btn-small">–¢–∞—Ä–∞</button>
                    </div>
                    <button class="btn btn-primary" onclick="createProduct()">+ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
                </div>

                <div class="card">
                    <h3 class="card-title">–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤</h3>
                    <div style="margin-bottom: 1rem;">
                        <input type="text" class="form-input" id="nomenclatureSearch" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –∫–æ–¥—É, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏...">
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>–ö–æ–¥</th>
                                <th>–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
                                <th>–ì—Ä—É–ø–ø–∞</th>
                                <th>–ï–ò</th>
                                <th>–û—Å—Ç–∞—Ç–æ–∫</th>
                                <th>–¶–µ–Ω–∞</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="productsTableBody">
                            <tr>
                                <td colspan="7" style="text-align: center; padding: 2rem; color: #999;">
                                    –ó–∞–≥—Ä—É–∑–∫–∞...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Recipes / Tech Cards -->
            <div id="recipes" class="page-content">
                <div class="card">
                    <h3 class="card-title">üìñ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç—ã (–¢–ö/–¢–¢–ö)</h3>
                    <button class="btn btn-primary" onclick="createRecipe()">+ –°–æ–∑–¥–∞—Ç—å –¢–ö</button>
                    <button class="btn btn-secondary">–ò–º–ø–æ—Ä—Ç –∏–∑ CSV</button>
                </div>

                <div class="card">
                    <h3 class="card-title">–°–ø–∏—Å–æ–∫ —Ç–µ—Ö–∫–∞—Ä—Ç</h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>–ö–æ–¥</th>
                                <th>–ë–ª—é–¥–æ</th>
                                <th>–í—ã—Ö–æ–¥ (–ø–æ—Ä—Ü–∏—è)</th>
                                <th>–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å</th>
                                <th>–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤</th>
                                <th>–í–µ—Ä—Å–∏—è</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="recipesTableBody">
                            <tr>
                                <td colspan="7" style="text-align: center; padding: 2rem; color: #999;">
                                    –ó–∞–≥—Ä—É–∑–∫–∞...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Warehouse -->
            <div id="warehouse" class="page-content">
                <div class="grid grid-3">
                    <div class="card">
                        <h3 class="card-title">üè≠ –°–∫–ª–∞–¥—ã</h3>
                        <ul style="list-style: none; padding: 0;">
                            <li style="padding: 0.5rem; border-bottom: 1px solid #e5e5e5;">
                                <strong>–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥</strong><br>
                                <span style="font-size: 0.85em; color: #666;">1245 –ø–æ–∑–∏—Ü–∏–π</span>
                            </li>
                            <li style="padding: 0.5rem; border-bottom: 1px solid #e5e5e5;">
                                <strong>–ö—É—Ö–Ω—è/–¶–µ—Ö</strong><br>
                                <span style="font-size: 0.85em; color: #666;">145 –ø–æ–∑–∏—Ü–∏–π</span>
                            </li>
                            <li style="padding: 0.5rem; border-bottom: 1px solid #e5e5e5;">
                                <strong>–ë–∞—Ä</strong><br>
                                <span style="font-size: 0.85em; color: #666;">78 –ø–æ–∑–∏—Ü–∏–π</span>
                            </li>
                            <li style="padding: 0.5rem;">
                                <strong>–†–∞–∑–ª–∏–≤–Ω–æ–π —É–∑–µ–ª</strong><br>
                                <span style="font-size: 0.85em; color: #666;">12 –ø–æ–∑–∏—Ü–∏–π</span>
                            </li>
                        </ul>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üìã –î–æ–∫—É–º–µ–Ω—Ç—ã</h3>
                        <button class="btn btn-primary btn-small" style="width: 100%; margin-bottom: 0.5rem;">–ü—Ä–∏—Ö–æ–¥</button>
                        <button class="btn btn-primary btn-small" style="width: 100%; margin-bottom: 0.5rem;">–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ</button>
                        <button class="btn btn-primary btn-small" style="width: 100%; margin-bottom: 0.5rem;">–°–ø–∏—Å–∞–Ω–∏–µ</button>
                        <button class="btn btn-primary btn-small" style="width: 100%;">–í–æ–∑–≤—Ä–∞—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫—É</button>
                    </div>

                    <div class="card">
                        <h3 class="card-title">‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å—Ç–∞—Ç–∫–∏</h3>
                        <ul style="list-style: none; padding: 0;">
                            <li style="padding: 0.5rem; background: rgba(239, 68, 68, 0.15); border-radius: 6px; margin-bottom: 0.5rem; border: 1px solid rgba(239, 68, 68, 0.3);">
                                <strong style="color: #fca5a5;">–õ–æ—Å–æ—Å—å —Ñ–∏–ª–µ</strong><br>
                                <span style="font-size: 0.85em; color: #F3EADB;">0.8 –∫–≥ (–º–∏–Ω: 5 –∫–≥)</span>
                            </li>
                            <li style="padding: 0.5rem; background: rgba(245, 158, 11, 0.15); border-radius: 6px; margin-bottom: 0.5rem; border: 1px solid rgba(245, 158, 11, 0.3);">
                                <strong style="color: #fbbf24;">–¢–µ—Å—Ç–æ –¥–ª—è –ø–∏—Ü—Ü—ã</strong><br>
                                <span style="font-size: 0.85em; color: #F3EADB;">12 —à—Ç (–º–∏–Ω: 50 —à—Ç)</span>
                            </li>
                            <li style="padding: 0.5rem; background: rgba(245, 158, 11, 0.15); border-radius: 6px; border: 1px solid rgba(245, 158, 11, 0.3);">
                                <strong style="color: #fbbf24;">–°–æ—É—Å —Ç–æ–º–∞—Ç–Ω—ã–π</strong><br>
                                <span style="font-size: 0.85em; color: #F3EADB;">2.5 –ª (–º–∏–Ω: 10 –ª)</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">–û—Å—Ç–∞—Ç–∫–∏ –ø–æ —Å–∫–ª–∞–¥–∞–º</h3>
                    <div style="margin-bottom: 1rem; display: flex; gap: 1rem; align-items: center;">
                        <input type="text" class="form-input" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏—é, –∫–æ–¥—É, –ø–∞—Ä—Ç–∏–∏..." style="flex: 1;">
                        <button class="btn btn-primary" onclick="warehouseModule.createArrivalDocument()">
                            üì• –ü—Ä–∏—Ö–æ–¥ —Ç–æ–≤–∞—Ä–∞
                        </button>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>–ö–æ–¥</th>
                                <th>–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
                                <th>–ü–∞—Ä—Ç–∏—è</th>
                                <th>–°—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏</th>
                                <th>–°–∫–ª–∞–¥</th>
                                <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                                <th>–°—É–º–º–∞</th>
                            </tr>
                        </thead>
                        <tbody id="stockBalancesBody">
                            <tr>
                                <td colspan="7" style="text-align: center; padding: 2rem; color: #999;">
                                    –ó–∞–≥—Ä—É–∑–∫–∞...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Production -->
            <div id="production" class="page-content">
                <div class="card">
                    <h3 class="card-title">‚öôÔ∏è –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ / –ö—É—Ö–Ω—è</h3>
                    <button class="btn btn-primary" onclick="productionModule.createProductionOrder()" style="margin-top: 1rem;">
                        ‚ûï –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–π –Ω–∞—Ä—è–¥
                    </button>
                </div>

                <div class="card">
                    <h3 class="card-title">üìã –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–∞—Ä—è–¥—ã</h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>‚Ññ –ù–∞—Ä—è–¥–∞</th>
                                <th>–î–∞—Ç–∞</th>
                                <th>–ü–æ–ª—É—Ñ–∞–±—Ä–∏–∫–∞—Ç</th>
                                <th>–ü–ª–∞–Ω</th>
                                <th>–§–∞–∫—Ç</th>
                                <th>–í—ã—Ö–æ–¥ %</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                            </tr>
                        </thead>
                        <tbody id="productionOrdersBody">
                            <tr>
                                <td colspan="7" style="text-align: center; padding: 2rem; color: #999;">
                                    –ó–∞–≥—Ä—É–∑–∫–∞...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Bar / Draft -->
            <div id="bar" class="page-content">
                <div class="card">
                    <h3 class="card-title">üç∫ –ë–∞—Ä –∏ —Ä–∞–∑–ª–∏–≤–Ω–æ–µ –ø–∏–≤–æ</h3>
                    <div class="alert alert-info">
                        <span>üí°</span>
                        <div>
                            <strong>–†–µ–∂–∏–º —É—á–µ—Ç–∞:</strong> –°–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏ –≤—Å–∫—Ä—ã—Ç–∏–∏ –±—É—Ç—ã–ª–∫–∏ + –ø–æ—Ä—Ü–∏–æ–Ω–Ω—ã–π —É—á–µ—Ç —Ä–∞–∑–ª–∏–≤–∞
                        </div>
                    </div>
                </div>

                <div class="grid grid-2">
                    <div class="card">
                        <h3 class="card-title">üçæ –û—Ç–∫—Ä—ã—Ç—ã–µ –±—É—Ç—ã–ª–∫–∏</h3>
                        <button class="btn btn-primary" onclick="openBottle()" style="margin-bottom: 1rem;">üîì –í—Å–∫—Ä—ã—Ç—å –±—É—Ç—ã–ª–∫—É</button>
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</th>
                                    <th>–û–±—ä—ë–º</th>
                                    <th>–û—Å—Ç–∞—Ç–æ–∫</th>
                                    <th>–í—Å–∫—Ä—ã—Ç–∞</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody id="openedBottlesBody">
                                <tr>
                                    <td colspan="5" style="text-align: center; padding: 2rem; color: #999;">
                                        –ó–∞–≥—Ä—É–∑–∫–∞...
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üç∫ –†–∞–∑–ª–∏–≤–Ω–æ–µ –ø–∏–≤–æ (–∫–µ–≥–∏)</h3>
                        <div id="kegsContainer" style="display: flex; flex-direction: column; gap: 1rem; margin-bottom: 1rem;">
                            <!-- –ö–µ–≥–∏ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">üìã –ê–∫—Ç—ã –∏ —Å–ø–∏—Å–∞–Ω–∏—è</h3>
                    <div class="tabs-secondary">
                        <button class="btn btn-primary btn-small">–í—Å–∫—Ä—ã—Ç–∏–µ</button>
                        <button class="btn btn-secondary btn-small">–ü–æ—Ä—á–∞</button>
                        <button class="btn btn-secondary btn-small">–¢–µ—Ö–ø–æ—Ç–µ—Ä–∏</button>
                        <button class="btn btn-secondary btn-small">–ü—Ä–æ–ª–∏–≤</button>
                    </div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>–í—Ä–µ–º—è</th>
                                <th>–û–ø–µ—Ä–∞—Ü–∏—è</th>
                                <th>–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞</th>
                                <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                                <th>–ü—Ä–∏—á–∏–Ω–∞</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>14:30</td>
                                <td>–í—Å–∫—Ä—ã—Ç–∏–µ</td>
                                <td>–í–æ–¥–∫–∞ "–†—É—Å—Å–∫–∏–π –°—Ç–∞–Ω–¥–∞—Ä—Ç" 0.5–ª</td>
                                <td>1 —à—Ç (500 –º–ª)</td>
                                <td>–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –∑–∞–ª–∞</td>
                            </tr>
                            <tr>
                                <td>13:15</td>
                                <td>–¢–µ—Ö–ø–æ—Ç–µ—Ä–∏</td>
                                <td>–ü–∏–≤–æ —Å–≤–µ—Ç–ª–æ–µ —Ä–∞–∑–ª–∏–≤–Ω–æ–µ</td>
                                <td>0.8 –ª</td>
                                <td>–ü–µ–Ω–∞/–ø—Ä–æ–º—ã–≤–∫–∞</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Inventory -->
            <div id="inventory" class="page-content">
                <div class="card">
                    <h3 class="card-title">üìã –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è</h3>
                    <button class="btn btn-primary" onclick="inventoryCountModule.startInventory()">üéØ –ù–∞—á–∞—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—é</button>
                </div>

                <div class="card">
                    <h3 class="card-title">–ò—Å—Ç–æ—Ä–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏–π</h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>‚Ññ –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏</th>
                                <th>–î–∞—Ç–∞</th>
                                <th>–°–∫–ª–∞–¥</th>
                                <th>–ü—Ä–æ–≥—Ä–µ—Å—Å</th>
                                <th>–†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                            </tr>
                        </thead>
                        <tbody id="inventoriesBody">
                            <tr>
                                <td colspan="6" style="text-align: center; padding: 2rem; color: #999;">
                                    –ó–∞–≥—Ä—É–∑–∫–∞...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- EGAIS Module -->
            <div id="egais-module" class="page-content">
                <div class="card">
                    <h3 class="card-title">üç∑ –ï–ì–ê–ò–° ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–ª–∫–æ–≥–æ–ª–µ–º</h3>
                    <div class="alert alert-info">
                        <span>‚ÑπÔ∏è</span>
                        <div>
                            <strong>–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã:</strong> –†–µ—Å—Ç–æ—Ä–∞–Ω (—Ä–∞–∑–ª–∏–≤) + –ú–∞–≥–∞–∑–∏–Ω (–±—É—Ç—ã–ª–æ—á–Ω–æ–µ)<br>
                            <strong>–£–¢–ú —Å—Ç–∞—Ç—É—Å:</strong> <span id="utmStatus"></span>
                        </div>
                    </div>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 1rem;">
                        <button class="btn btn-primary" onclick="egaisModule.acceptTTN()">üì• –ü—Ä–∏–Ω—è—Ç—å –¢–¢–ù</button>
                        <button class="btn btn-secondary" onclick="egaisModule.createWriteoffAct()">üìã –ê–∫—Ç —Å–ø–∏—Å–∞–Ω–∏—è</button>
                        <button class="btn btn-secondary" onclick="egaisModule.createReturnAct()">‚Ü©Ô∏è –í–æ–∑–≤—Ä–∞—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫—É</button>
                        <button class="btn btn-secondary" onclick="egaisModule.syncWithEGAIS()">üîÑ –°–≤–µ—Ä–∫–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤</button>
                    </div>
                </div>

                <div class="grid grid-2">
                    <div class="card">
                        <h3 class="card-title">üìä –û—Å—Ç–∞—Ç–∫–∏ –∞–ª–∫–æ–≥–æ–ª—è</h3>
                        <div id="alcoholStockContainer"></div>
                    </div>
                    <div class="card">
                        <h3 class="card-title">‚ö†Ô∏è –¢—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è</h3>
                        <div class="alert alert-warning">
                            <span>‚ö†Ô∏è</span>
                            <div>
                                <strong>–û–∂–∏–¥–∞—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:</strong> 1 –æ–ø–µ—Ä–∞—Ü–∏—è<br>
                                <a href="#" style="color: inherit; text-decoration: underline;">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å ‚Üí</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">üìã –ñ—É—Ä–Ω–∞–ª –æ–ø–µ—Ä–∞—Ü–∏–π –ï–ì–ê–ò–°</h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>–î–∞—Ç–∞/–í—Ä–µ–º—è</th>
                                <th>–û–ø–µ—Ä–∞—Ü–∏—è</th>
                                <th>–î–æ–∫—É–º–µ–Ω—Ç</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–û—à–∏–±–∫–∏</th>
                            </tr>
                        </thead>
                        <tbody id="egaisOperationsBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Honest Sign / CRPT -->
            <div id="crpt" class="page-content">
                <div class="card">
                    <h3 class="card-title">üè∑Ô∏è –ß–µ—Å—Ç–Ω—ã–π –ó–ù–ê–ö ‚Äî –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤</h3>
                    <div class="alert alert-info">
                        <span>‚ÑπÔ∏è</span>
                        <div>
                            <strong>API —Å—Ç–∞—Ç—É—Å:</strong> <span id="crptAPIStatus"></span>
                        </div>
                    </div>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 1rem;">
                        <button class="btn btn-primary" onclick="crptModule.scanCode()">üì∑ –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
                        <button class="btn btn-secondary" onclick="crptModule.startMassScanning()">üìã –ú–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞</button>
                    </div>
                </div>

                <div class="grid grid-2">
                    <div class="card">
                        <h3 class="card-title">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–¥–æ–≤</h3>
                        <div id="crptStatisticsContainer"></div>
                    </div>
                    <div class="card">
                        <h3 class="card-title">‚ö†Ô∏è –¢—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è</h3>
                        <div class="alert alert-info">
                            <span>‚úÖ</span>
                            <div>–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">üìã –ö–æ–¥—ã –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏</h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>–î–∞—Ç–∞</th>
                                <th>–ö–æ–¥ DataMatrix</th>
                                <th>–¢–æ–≤–∞—Ä</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="crptCodesBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Mercury / VETIS -->
            <div id="mercury" class="page-content">
                <div class="card">
                    <h3 class="card-title">üêÑ –§–ì–ò–° ¬´–ú–µ—Ä–∫—É—Ä–∏–π¬ª ‚Äî –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å</h3>
                    <div class="alert alert-info">
                        <span>‚ÑπÔ∏è</span>
                        <div>
                            <strong>–í–ï–¢–ò–°.API —Å—Ç–∞—Ç—É—Å:</strong> <span id="mercuryAPIStatus"></span><br>
                            <strong>–ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ:</strong> –û–û–û "–î–≠–ù–î–ò"
                        </div>
                    </div>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap; margin-top: 1rem;">
                        <button class="btn btn-primary" onclick="mercuryModule.loadIncomingVSD()">üì• –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–µ</button>
                    </div>
                </div>

                <div class="grid grid-2">
                    <div class="card">
                        <h3 class="card-title">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –í–°–î</h3>
                        <div id="mercuryStatisticsContainer"></div>
                    </div>
                    <div class="card">
                        <h3 class="card-title">‚ö†Ô∏è –¢—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è</h3>
                        <div class="alert alert-warning">
                            <span>‚ö†Ô∏è</span>
                            <div>
                                <strong>–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–≥–∞—à–µ–Ω–∏–µ –í–°–î!</strong><br>
                                –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä—Ç–∏–∏ —Å–æ —Å–∫–æ—Ä—ã–º –∏—Å—Ç–µ—á–µ–Ω–∏–µ–º —Å—Ä–æ–∫–∞
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">üìã –ñ—É—Ä–Ω–∞–ª –í–°–î</h3>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>–ù–æ–º–µ—Ä –í–°–î</th>
                                <th>–î–∞—Ç–∞ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è</th>
                                <th>–¢–æ–≤–∞—Ä</th>
                                <th>–û–±—ä—ë–º</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="mercuryVSDBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Integrations -->
            <div id="integrations" class="page-content">
                <div class="card">
                    <h3 class="card-title">üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –æ–±–º–µ–Ω—ã –¥–∞–Ω–Ω—ã–º–∏</h3>
                </div>

                <div class="grid grid-3">
                    <div class="card">
                        <h3 class="card-title">üè¢ 1–°</h3>
                        <div style="margin-bottom: 1rem;">
                            <strong>–°—Ç–∞—Ç—É—Å:</strong> <span class="badge badge-danger">–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω</span><br>
                            <strong>–ü—Ä–æ—Ç–æ–∫–æ–ª:</strong> CommerceML 2.0 / OData
                        </div>
                        <button class="btn btn-primary btn-small" onclick="integrationsModule.setup1C()">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å</button>
                        <button class="btn btn-secondary btn-small" onclick="integrationsModule.sync1C()">üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üçΩÔ∏è r_keeper</h3>
                        <div style="margin-bottom: 1rem;">
                            <strong>–°—Ç–∞—Ç—É—Å:</strong> <span class="badge badge-danger">–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω</span><br>
                            <strong>–†–µ–∂–∏–º:</strong> CSV / XML / API
                        </div>
                        <button class="btn btn-primary btn-small" onclick="integrationsModule.setupRKeeper()">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å</button>
                        <button class="btn btn-secondary btn-small" onclick="integrationsModule.importSalesFromRKeeper()">üì• –ò–º–ø–æ—Ä—Ç –ø—Ä–æ–¥–∞–∂</button>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üõí –ö–æ–Ω—Ç—É—Ä.–ú–∞—Ä–∫–µ—Ç</h3>
                        <div style="margin-bottom: 1rem;">
                            <strong>–°—Ç–∞—Ç—É—Å:</strong> <span class="badge badge-danger">–ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω</span><br>
                            <strong>API:</strong> REST v3
                        </div>
                        <button class="btn btn-primary btn-small" onclick="integrationsModule.setupKontur()">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å</button>
                        <button class="btn btn-secondary btn-small" onclick="integrationsModule.importOrdersFromKontur()">üì• –ò–º–ø–æ—Ä—Ç –∑–∞–∫–∞–∑–æ–≤</button>
                    </div>
                </div>

                <div class="card">
                    <h3 class="card-title">üì• –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ —Å —Å–∏—Å—Ç–µ–º–æ–π</h3>
                    <p style="margin-bottom: 1rem; color: var(--text-light); opacity: 0.8;">
                        –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∞–¥–º–∏–Ω–∫–∏ –∏ —Å–∞–π—Ç–∞ –≤ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—É —Ç–æ–≤–∞—Ä–æ—É—á—ë—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã. 
                        –¢–æ–≤–∞—Ä—ã –±—É–¥—É—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å API –∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
                    </p>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <button class="btn btn-primary" onclick="nomenclatureModule.loadProductsFromAPI()">
                            üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å API (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
                        </button>
                        <button class="btn btn-secondary" onclick="nomenclatureModule.loadMenuFromJSON()">
                            üìã –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ menu_data.json (fallback)
                        </button>
                            <button class="btn btn-success" onclick="inventorySystem.publishMenuToSite()">
                                üöÄ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –º–µ–Ω—é –Ω–∞ —Å–∞–π—Ç
                            </button>
                    </div>
                    <div style="margin-top: 1rem; padding: 0.75rem; background: rgba(255,255,255,0.05); border-radius: 8px; font-size: 0.85rem; color: var(--text-light); opacity: 0.7;">
                        üí° <strong>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</strong> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö 
                        –∏–∑ –∞–¥–º–∏–Ω–∫–∏ –∏ —Å–∞–π—Ç–∞. –í—Å–µ —Ç–æ–≤–∞—Ä—ã –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã.
                    </div>
                </div>
            </div>

            <!-- Reports -->
            <div id="reports" class="page-content">
                <div class="card">
                    <h3 class="card-title">üìà –û—Ç—á—ë—Ç—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</h3>
                    
                    <!-- –§–∏–ª—å—Ç—Ä –ø–µ—Ä–∏–æ–¥–∞ -->
                    <div style="display: flex; gap: 1rem; align-items: center; margin-top: 1rem; flex-wrap: wrap;">
                        <div class="form-group" style="margin: 0;">
                            <label class="form-label" style="margin-bottom: 0.25rem;">–ü–µ—Ä–∏–æ–¥ —Å:</label>
                            <input type="date" class="form-input" id="reportDateFrom">
                        </div>
                        <div class="form-group" style="margin: 0;">
                            <label class="form-label" style="margin-bottom: 0.25rem;">–ø–æ:</label>
                            <input type="date" class="form-input" id="reportDateTo">
                        </div>
                    </div>
                </div>

                <div class="grid grid-3">
                    <div class="card">
                        <h3 class="card-title">üí∞ COGS / –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å</h3>
                        <p style="margin-bottom: 1rem; color: #666;">–û—Ç—á–µ—Ç –ø–æ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤</p>
                        <button class="btn btn-primary btn-small" onclick="reportsModule.generateCOGSReport()">–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>

                    <div class="card">
                        <h3 class="card-title">‚≠ê Menu Engineering</h3>
                        <p style="margin-bottom: 1rem; color: #666;">–ê–Ω–∞–ª–∏–∑ –º–µ–Ω—é: –∑–≤–µ–∑–¥—ã, —Ç—Ä—É–¥—è–≥–∏, —Å–æ–±–∞–∫–∏, –ª–æ—à–∞–¥–∏</p>
                        <button class="btn btn-primary btn-small" onclick="reportsModule.generateMenuEngineeringReport()">–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üìä ABC-XYZ –∞–Ω–∞–ª–∏–∑</h3>
                        <p style="margin-bottom: 1rem; color: #666;">–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏</p>
                        <button class="btn btn-primary btn-small" onclick="reportsModule.generateABCXYZReport()">–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üóëÔ∏è Waste / –ü–æ—Ç–µ—Ä–∏</h3>
                        <p style="margin-bottom: 1rem; color: var(--text-light); opacity: 0.8;">–û—Ç—á–µ—Ç –ø–æ –ø–æ—Ç–µ—Ä—è–º –∏ —Å–ø–∏—Å–∞–Ω–∏—è–º</p>
                        <button class="btn btn-primary btn-small" onclick="reportsModule.generateWasteReport()">üìä –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üì¶ –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç—å</h3>
                        <p style="margin-bottom: 1rem; color: var(--text-light); opacity: 0.8;">–°–∫–æ—Ä–æ—Å—Ç—å –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–æ–≤</p>
                        <button class="btn btn-primary btn-small" onclick="reportsModule.generateTurnoverReport()">üìä –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üç∑ –ê–ª–∫–æ-–¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏</h3>
                        <p style="margin-bottom: 1rem; color: var(--text-light); opacity: 0.8;">–§–æ—Ä–º—ã 7/8 –§–°–†–ê–†</p>
                        <button class="btn btn-primary btn-small" onclick="reportsModule.generateAlcoholReport()">üìä –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                </div>

                <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ—Ç—á—ë—Ç–∞ -->
                <div id="reportResults"></div>
            </div>

            <!-- Settings -->
            <div id="settings" class="page-content">
                <!-- –°–µ–ª–µ–∫—Ç–æ—Ä —Ä–æ–ª–µ–π -->
                <div id="rolesSelector" style="margin-bottom: 2rem;">
                    <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
                
                <div class="card">
                    <h3 class="card-title">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã —Ç–æ–≤–∞—Ä–æ—É—á—ë—Ç–∞</h3>
                </div>

                <div class="grid grid-2">
                    <div class="card">
                        <h3 class="card-title">üè¢ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è</h3>
                        <div class="form-group">
                            <label class="form-label">–ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ</label>
                            <input type="text" class="form-input" value="–û–û–û &quot;–î–≠–ù–î–ò&quot;">
                        </div>
                        <div class="form-group">
                            <label class="form-label">–ò–ù–ù</label>
                            <input type="text" class="form-input" value="7700123456">
                        </div>
                        <div class="form-group">
                            <label class="form-label">–ö–ü–ü</label>
                            <input type="text" class="form-input" value="770001001">
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üíº –ù–∞–ª–æ–≥–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                        <div class="form-group">
                            <label class="form-label">–†–µ–∂–∏–º –Ω–∞–ª–æ–≥–æ–æ–±–ª–æ–∂–µ–Ω–∏—è</label>
                            <select class="form-select">
                                <option>–£–°–ù (–¥–æ—Ö–æ–¥—ã - —Ä–∞—Å—Ö–æ–¥—ã)</option>
                                <option>–û–°–ù</option>
                                <option>–ü–°–ù</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–°—Ç–∞–≤–∫–∞ –ù–î–° –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</label>
                            <select class="form-select">
                                <option>20%</option>
                                <option>10%</option>
                                <option>–ë–µ–∑ –ù–î–°</option>
                            </select>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üìä –ú–µ—Ç–æ–¥—ã —É—á–µ—Ç–∞</h3>
                        <div class="form-group">
                            <label class="form-label">–ú–µ—Ç–æ–¥ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏</label>
                            <select class="form-select">
                                <option>FIFO (–ø–æ –ø–∞—Ä—Ç–∏—è–º)</option>
                                <option>–°—Ä–µ–¥–Ω—è—è —Å–∫–æ–ª—å–∑—è—â–∞—è</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–£—á—ë—Ç —Ä–∞–∑–ª–∏–≤–∞</label>
                            <select class="form-select">
                                <option>–°–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏ –≤—Å–∫—Ä—ã—Ç–∏–∏</option>
                                <option>–ü–æ—Ä—Ü–∏–æ–Ω–Ω–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ</option>
                            </select>
                        </div>
                    </div>

                    <div class="card">
                        <h3 class="card-title">üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox" checked>
                                <span>–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å—Ç–∞—Ç–∫–∏</span>
                            </label>
                        </div>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox" checked>
                                <span>–ü—Ä–æ—Å—Ä–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤</span>
                            </label>
                        </div>
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="checkbox">
                                <span>–û—à–∏–±–∫–∏ —Ä–µ–≥—É–ª—è—Ç–æ—Ä–æ–≤</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–ª–∞–¥–∞–º–∏ -->
                <div class="card">
                    <div id="warehousesManagement"></div>
                </div>

                <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –µ–¥–∏–Ω–∏—Ü–∞–º–∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è -->
                <div class="card">
                    <div id="unitsManagement"></div>
                </div>

                <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ -->
                <div class="card">
                    <div id="categoriesManagement"></div>
                </div>

                <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ -->
                <div class="card">
                    <div id="usersManagement"></div>
                </div>

                <!-- Backup / Restore -->
                <div class="card">
                    <div id="backupManagement"></div>
                </div>

                <!-- –ñ—É—Ä–Ω–∞–ª –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
                <div class="card">
                    <h3 class="card-title">üìú –ñ—É—Ä–Ω–∞–ª –∏–∑–º–µ–Ω–µ–Ω–∏–π (Audit Log)</h3>
                    <div id="auditLogContainer"></div>
                </div>

                <div class="card">
                    <button class="btn btn-primary" onclick="settingsModule.saveSettings()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                </div>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="inventory-system.js"></script>
        <script src="modules/inventory-validator.js"></script>
        <script src="modules/inventory-settings.js"></script>
        <script src="modules/inventory-backup.js"></script>
        <script src="modules/inventory-notifications.js"></script>
        <script src="modules/inventory-search.js"></script>
        <script src="modules/inventory-dragdrop.js"></script>
        <script src="modules/inventory-print.js"></script>
        <script src="modules/inventory-roles.js"></script>
        <script src="modules/inventory-nomenclature.js"></script>
    <script src="modules/inventory-recipes.js"></script>
    <script src="modules/inventory-warehouse.js"></script>
    <script src="modules/inventory-bar.js"></script>
    <script src="modules/inventory-egais.js"></script>
    <script src="modules/inventory-crpt.js"></script>
    <script src="modules/inventory-mercury.js"></script>
    <script src="modules/inventory-reports.js"></script>
    <script src="modules/inventory-production.js"></script>
    <script src="modules/inventory-count.js"></script>
    <script src="modules/inventory-integrations.js"></script>
    <script src="modules/admin-product-cards.js"></script>
    
    <script>
            // Global module instances (make them truly global)
            var validator;
            var settingsModule;
            var backupModule;
            var notificationsModule;
            var globalSearchModule;
            var dragDropModule;
            var printModule;
            var rolesModule;
            var nomenclatureModule;
        var recipesModule;
        var warehouseModule;
        var barModule;
        var egaisModule;
        var crptModule;
        var mercuryModule;
        var reportsModule;
        var productionModule;
        var inventoryCountModule;
        var integrationsModule;

        // Initialization
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ Initializing DANDY Inventory System...');
            
                // Wait for inventorySystem to be ready
                setTimeout(() => {
                    if (window.inventorySystem) {
                        // Initialize core modules
                        window.validator = validator = new InventoryValidator();
                        window.settingsModule = settingsModule = new SettingsModule(inventorySystem);
                        window.backupModule = backupModule = new BackupModule(inventorySystem);
                        window.notificationsModule = notificationsModule = new NotificationsModule(inventorySystem);
                        window.globalSearchModule = globalSearchModule = new GlobalSearchModule(inventorySystem);
                        window.dragDropModule = dragDropModule = new DragDropModule(inventorySystem);
                        window.printModule = printModule = new PrintModule(inventorySystem);
                        window.rolesModule = rolesModule = new RolesModule(inventorySystem);
                        
                        // Initialize UI
                        notificationsModule.init();
                        globalSearchModule.renderSearchUI();
                        dragDropModule.init();
                        rolesModule.updateUserDisplay();
                        
                        // –ü—Ä–∏–º–µ–Ω—è–µ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–æ–ª–µ–π
                        setTimeout(() => rolesModule.applyRestrictions(), 200);
                        
                        // Initialize feature modules
                        window.nomenclatureModule = nomenclatureModule = new NomenclatureModule(inventorySystem);
                        window.recipesModule = recipesModule = new RecipesModule(inventorySystem);
                        window.warehouseModule = warehouseModule = new WarehouseModule(inventorySystem);
                        window.barModule = barModule = new BarModule(inventorySystem);
                        window.egaisModule = egaisModule = new EGAISModule(inventorySystem);
                        window.crptModule = crptModule = new CRPTModule(inventorySystem);
                        window.mercuryModule = mercuryModule = new MercuryModule(inventorySystem);
                        window.reportsModule = reportsModule = new ReportsModule(inventorySystem);
                        window.productionModule = productionModule = new ProductionModule(inventorySystem);
                        window.inventoryCountModule = inventoryCountModule = new InventoryCountModule(inventorySystem);
                        window.integrationsModule = integrationsModule = new IntegrationsModule(inventorySystem);
                        
                        console.log('‚úÖ All modules initialized');
                        console.log('üì¶ Products loaded:', inventorySystem.products.length);
                        console.log('üìç Current page:', inventorySystem.currentPage);
                        
                        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∞–∫—Ç–∏–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
                        const activePage = inventorySystem.currentPage;
                        if (activePage === 'nomenclature' && nomenclatureModule) {
                            console.log('üîÑ Initializing nomenclature on load...');
                            nomenclatureModule.init();
                        }
                        if (activePage === 'settings' && settingsModule) {
                            console.log('‚öôÔ∏è Initializing settings on load...');
                            settingsModule.init();
                            backupModule.renderBackupUI();
                            
                            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å–µ–ª–µ–∫—Ç–æ—Ä —Ä–æ–ª–µ–π
                            const rolesSelector = document.getElementById('rolesSelector');
                            if (rolesSelector && rolesModule) {
                                rolesSelector.innerHTML = rolesModule.renderRoleSelector();
                            }
                        }
                        
                        // –î–æ–±–∞–≤–ª—è–µ–º —Ñ–ª–∞–≥ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
                        window.inventorySystemReady = true;
                        console.log('‚úÖ System fully ready!');

                        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≥—Ä–∞—Ñ–∏–∫–∏ –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ
                        setTimeout(() => initDashboardCharts(), 500);
                    }
                }, 100);
        });

        // === Dashboard Charts ===
        function initDashboardCharts() {
            // 1. –î–∏–Ω–∞–º–∏–∫–∞ –ø—Ä–æ–¥–∞–∂
            const salesCtx = document.getElementById('salesDynamicsChart');
            if (salesCtx) {
                new Chart(salesCtx, {
                    type: 'line',
                    data: {
                        labels: Array.from({length: 30}, (_, i) => `–î–µ–Ω—å ${i+1}`),
                        datasets: [{
                            label: '–í—ã—Ä—É—á–∫–∞, ‚ÇΩ',
                            data: Array.from({length: 30}, () => Math.floor(Math.random() * 50000) + 30000),
                            borderColor: '#eebc5c',
                            backgroundColor: 'rgba(238, 188, 92, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                backgroundColor: '#094a45',
                                titleColor: '#eebc5c',
                                bodyColor: '#F3EADB'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: { color: '#F3EADB' },
                                grid: { color: 'rgba(255,255,255,0.1)' }
                            },
                            x: {
                                ticks: { color: '#F3EADB', maxRotation: 45 },
                                grid: { display: false }
                            }
                        }
                    }
                });
            }

            // 2. –¢–û–ü-10 —Ç–æ–≤–∞—Ä–æ–≤
            const topCtx = document.getElementById('topProductsChart');
            if (topCtx) {
                const topProducts = inventorySystem.products
                    .sort((a, b) => (b.stock || 0) - (a.stock || 0))
                    .slice(0, 10);

                new Chart(topCtx, {
                    type: 'bar',
                    data: {
                        labels: topProducts.map(p => p.name.substring(0, 20)),
                        datasets: [{
                            label: '–û—Å—Ç–∞—Ç–æ–∫',
                            data: topProducts.map(p => p.stock || 0),
                            backgroundColor: '#eebc5c',
                            borderColor: '#eebc5c',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        indexAxis: 'y',
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                backgroundColor: '#094a45',
                                titleColor: '#eebc5c',
                                bodyColor: '#F3EADB'
                            }
                        },
                        scales: {
                            x: {
                                beginAtZero: true,
                                ticks: { color: '#F3EADB' },
                                grid: { color: 'rgba(255,255,255,0.1)' }
                            },
                            y: {
                                ticks: { color: '#F3EADB' },
                                grid: { display: false }
                            }
                        }
                    }
                });
            }

            // 3. –†–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
            const profitCtx = document.getElementById('profitabilityChart');
            if (profitCtx) {
                const categories = [...new Set(inventorySystem.products.map(p => p.category).filter(Boolean))].slice(0, 7);
                
                new Chart(profitCtx, {
                    type: 'doughnut',
                    data: {
                        labels: categories,
                        datasets: [{
                            data: categories.map(() => Math.floor(Math.random() * 40) + 50),
                            backgroundColor: [
                                '#eebc5c',
                                '#ff69b4',
                                '#10b981',
                                '#3b82f6',
                                '#f59e0b',
                                '#8b5cf6',
                                '#ef4444'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: { color: '#F3EADB', padding: 10 }
                            },
                            tooltip: {
                                backgroundColor: '#094a45',
                                titleColor: '#eebc5c',
                                bodyColor: '#F3EADB',
                                callbacks: {
                                    label: (context) => `${context.label}: ${context.parsed}%`
                                }
                            }
                        }
                    }
                });
            }

            // 4. –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç—å
            const turnoverCtx = document.getElementById('turnoverChart');
            if (turnoverCtx) {
                new Chart(turnoverCtx, {
                    type: 'bar',
                    data: {
                        labels: ['–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–í—Å'],
                        datasets: [{
                            label: '–ü—Ä–æ–¥–∞–∂–∏',
                            data: [120, 150, 180, 170, 200, 250, 230],
                            backgroundColor: '#10b981'
                        }, {
                            label: '–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è',
                            data: [80, 90, 110, 100, 130, 160, 140],
                            backgroundColor: '#3b82f6'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                                labels: { color: '#F3EADB', padding: 10 }
                            },
                            tooltip: {
                                backgroundColor: '#094a45',
                                titleColor: '#eebc5c',
                                bodyColor: '#F3EADB'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: { color: '#F3EADB' },
                                grid: { color: 'rgba(255,255,255,0.1)' }
                            },
                            x: {
                                ticks: { color: '#F3EADB' },
                                grid: { display: false }
                            }
                        }
                    }
                });
            }

            console.log('üìä Dashboard charts initialized');
        }

        // === Tab Slider (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞) ===
        (function(){
            const tabsWrap = document.querySelector('.tabs-wrap');
            const tabsContainer = document.getElementById('tabsContainer');
            const underline = tabsWrap.querySelector('.tabs-underline');
            const thumb = underline.querySelector('.thumb');
            
            function updateThumb() {
                const trackWidth = underline.offsetWidth;
                const totalWidth = tabsContainer.scrollWidth;
                const visibleWidth = tabsContainer.clientWidth;
                const maxScroll = Math.max(1, totalWidth - visibleWidth);
                const thumbWidth = Math.max(40, (visibleWidth / totalWidth) * trackWidth);
                const x = (tabsContainer.scrollLeft / maxScroll) * Math.max(0, trackWidth - thumbWidth);
                
                underline.style.setProperty('--w', thumbWidth + 'px');
                underline.style.setProperty('--x', x + 'px');
            }
            
            function setScrollByRatio(ratio) {
                const maxScroll = Math.max(1, tabsContainer.scrollWidth - tabsContainer.clientWidth);
                tabsContainer.scrollLeft = Math.min(maxScroll, Math.max(0, ratio * maxScroll));
            }
            
            // Drag thumb
            let dragging = false;
            let startX = 0;
            let startRatio = 0;
            
            thumb.addEventListener('pointerdown', e => {
                dragging = true;
                tabsWrap.classList.add('dragging');
                startX = e.clientX;
                const trackW = underline.offsetWidth;
                const thumbW = parseFloat(getComputedStyle(underline).getPropertyValue('--w')) || 40;
                const usable = Math.max(1, trackW - thumbW);
                const currentX = parseFloat(getComputedStyle(underline).getPropertyValue('--x')) || 0;
                startRatio = currentX / usable;
                e.preventDefault();
            });
            
            document.addEventListener('pointermove', e => {
                if (!dragging) return;
                const trackW = underline.offsetWidth;
                const thumbW = parseFloat(getComputedStyle(underline).getPropertyValue('--w')) || 40;
                const usable = Math.max(1, trackW - thumbW);
                const dx = e.clientX - startX;
                const ratio = Math.min(1, Math.max(0, startRatio + dx / usable));
                setScrollByRatio(ratio);
                updateThumb();
            });
            
            document.addEventListener('pointerup', () => {
                if (!dragging) return;
                dragging = false;
                tabsWrap.classList.remove('dragging');
            });
            
            // Scroll events
            tabsContainer.addEventListener('scroll', updateThumb, { passive: true });
            new ResizeObserver(updateThumb).observe(tabsContainer);
            
            // Wheel scroll
            tabsContainer.addEventListener('wheel', e => {
                if (Math.abs(e.deltaY) > Math.abs(e.deltaX)) {
                    tabsContainer.scrollLeft += e.deltaY;
                    updateThumb();
                    e.preventDefault();
                }
            }, { passive: false });
            
            updateThumb();
            
            // === –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –∞–∫—Ç–∏–≤–Ω–æ–º—É —Ç–∞–±—É ===
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function(e) {
                    // –£–±–∏—Ä–∞–µ–º active —É –≤—Å–µ—Ö
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    // –î–æ–±–∞–≤–ª—è–µ–º active –∫ —Ç–µ–∫—É—â–µ–º—É
                    this.classList.add('active');
                    
                    // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ —ç—Ç–æ–º—É —Ç–∞–±—É (—Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏)
                    setTimeout(() => {
                        this.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'nearest', 
                            inline: 'center' 
                        });
                        updateThumb();
                    }, 50);
                });
            });
        })();

        // === Notifications Dropdown ===
        function toggleNotifications() {
            const dropdown = document.getElementById('notificationsDropdown');
            if (dropdown) {
                dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';
            }
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ
        document.addEventListener('click', (e) => {
            const dropdown = document.getElementById('notificationsDropdown');
            const bell = document.getElementById('notificationBell');
            if (dropdown && bell && !dropdown.contains(e.target) && !bell.contains(e.target)) {
                dropdown.style.display = 'none';
            }
        });

        // Global functions
        function createProduct() {
            if (nomenclatureModule) {
                nomenclatureModule.createProduct();
            }
        }

        function createRecipe() {
            if (recipesModule) {
                recipesModule.createRecipe();
            }
        }

        function editRecipe(code) {
            if (recipesModule) {
                recipesModule.editRecipe(code);
            }
        }

        function startInventory() {
            alert('üéØ –ù–∞—á–∞–ª–æ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏\n\n–ë—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏');
        }

        function openBottle() {
            if (barModule) {
                barModule.openBottle();
            }
        }

        function syncFlowMeter() {
            if (barModule) {
                barModule.syncWithFlowMeter();
            }
        }
    </script>
</body>
</html>

